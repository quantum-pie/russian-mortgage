# russian-mortgage

Небольшой скрипт для оптимизации цепочки покупок квартир по времени.
Идея состоит в том, что Вы покупаете несколько квартир друг за другом, закладывая каждую предыдущую в качестве 
начального взноса за следующую.

В скрипте mortgage.m необходимо задать годовую процентную ставку ипотеки (year_percent), 
ежемесячный чистый доход (month_income), 
сколько процентов от ежемесячного дохода Вы готовы отдавать в оплату ипотеки (payment_percent), 
сколько процентов от стоимости первой квартиры Вы готовы оплатить в качестве первого взноса (initial_payment_percent),
стоимость целевой квартиры, то есть той, которую Вы хотите приобрести в конечном счете (target_price),
количество этапов (покупок квартир), в которые вы хотите уложиться для достижения цели (operations).

Скрипт всегда будет выводить стоимости каждой из операций и минимальное общее время выплаты, например:

Operations prices are [2.22600286322123;3.36340427717553;4.5] millions
Duration is 10.5528 years

Если кол-во операций равно двум, то будет также выведен график зависимости времени выплаты 
от стоимости первой операции в виде кривой в двумерной системе координат.
Если кол-во операций равно трем, то будет выведена поверхность зависимости времени выплаты 
от стоимостей первой и второй операций в трехмерной системе координат.
Если кол-во операций равно четырем, то будет выведен scatterplot в трехмерной системе координат, 
где по осям отложены стоимости первой, второй и третьей операций, 
а размером и цветом точек отображено время выплаты.
На всех этих графиках будут отмечены оптимальные точки, которые также выводятся в консоль.
Если кол-во операций превышает 4 (не завидую), то дополнительная визуализация не предоставляется.
Обратите внимание на то, что на всех графиках визуализированы только те данные, 
которые удовлетворяют условию целесообразности покупок, то есть каждая следующая покупка должна быть дороже предыдущей.

Если были введены неадекватные исходные данные, при которых процент по ипотеке будет начисляться быстрее его выплаты, 
то скрипт отреагирует на это сообщением Incorrent input. 

Пример: я хочу в два этапа купить квартиру за 4 млн.руб, имею ежемесячный доход 80 т.руб, готов отдавать 40% дохода на оплату,
хочу выплатить первый взнос на первую квартиру в размере 20%, процент по ипотеке - 11% в год. Ввводим в скрипт следующее:

%% Input parameters

% annual interest rate in percents
year_percent = 11;

% target price in rubles
target_price = 4000000;

% family month income in rubles
month_income = 80000;

% percent of income to pay credit
payment_percent = 40;

% initial payment percent for first operation
initial_payment_percent = 20;

% month payment in rubles
month_pay = month_income * payment_percent / 100;

% number of operations
operations = 2;

После запуска получаем график и следующий вывод:

Operations prices are [2.43980124193195;4] millions
Duration is 13.055 years

Таким образом, оптимальным планом будет купить первую квартиру примерно за 2,4 млн.руб, затем внести ее в качестве первого взноса 
за квартиру целевой стоимости 4 млн.руб. При этом общее время выплаты кредитов составит примерно 13 лет.

Для сравнения изменим количество операций на одну, то есть попытаемся сразу купить квартиру целевой стоимости.
Получим следующий результат:

Operations prices are 4 millions
Duration is 22.7768 years

Как видите, разница налицо, теперь необходимо около 23 лет.

Думаю, что теперь стала ясна цель этой программы. 
Я не стал пока вносить возможности по учету изменяющихся во времени доходов или плавающей процентной ставки, 
поскольку предсказать такие вещи крайне сложно. Отсюда просьба не пытаться строить планы только на основе этих вычислений,
это предназначается для грубой прикидки, как Вам лучше поступить в конкретной ситуации, сколько этапов заложить и т.д.
Пожелания и замечания приветствуются. 